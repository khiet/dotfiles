# home
set -o vi
# "ls" color
export CLICOLOR=1
export LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx
export LESS=-RFX
export EDITOR='vim'

# source ~/.private

alias grep="grep --color"
alias ctags="ctags -R --exclude=.git --exclude=log ."
alias be="bundle exec"
alias gdel="git branch --merged | grep -v '\*' | xargs -n 1 git branch -d"
alias gsyncfork="git fetch upstream;git merge upstream/master"
alias gg="git grep"
alias fs="foreman start"
alias dl="youtube-dl -o '/Users/khietle/youtube/%(title)s-%(id)s.%(ext)s'"
alias ag='ag --hidden --path-to-ignore ~/.ignore'

# fzf
if type "fzf" > /dev/null 2>&1; then
  source "/usr/local/opt/fzf/shell/key-bindings.bash"
  # use ag instead of find
  # used in fzf and vim
  export FZF_DEFAULT_COMMAND='ag -l --no-color -g "" --hidden --path-to-ignore ~/.ignore'
  # used in fzf in <c-t>
  export FZF_CTRL_T_COMMAND='ag -l --no-color -g "" --hidden'
else
  echo 'fzf exist'
  # enable forward (C-s) - http://askubuntu.com/questions/60071/how-to-forward-search-history-with-the-reverse-i-search-command-ctrlr
  stty stop undef
fi

# rails
alias rr="bundle exec rails restart"
alias rc="bundle exec rails console"
alias rl="tail -f -n 1000 log/development.log"

export PATH="/usr/local/bin:/usr/local/sbin:$PATH"

# bundler
export BUNDLER_EDITOR=vim

# git-aware-prompt
# https://github.com/jimeh/git-aware-prompt
export GITAWAREPROMPT=~/.bash/git-aware-prompt
source $GITAWAREPROMPT/main.sh

# terminal colour
export PS1="\[$bldylw\]\\w \[$txtgrn\]\$git_branch\[$txtred\]\$git_dirty\[$txtrst\]\$ "

# tmuxinator
source ~/vimfiles/tmuxinator/tmuxinator.bash
export TMUXINATOR_CONFIG=~/vimfiles/tmuxinator/config

# history
export HISTCONTROL='ignoredups:erasedups'
export HISTSIZE=10000
export HISTIGNORE='ls:bg:fg:history'
export HISTFILESIZE=10000
export HISTTIMEFORMAT="%d/%m/%y %T "
shopt -s histappend # append to history
# save and reload the history after each command finishes
export PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"

# rbenv
eval "$(rbenv init -)"
