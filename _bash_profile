# home
set -o vi

# "ls" color
export CLICOLOR=1
export LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx

export LESS=-RFX
export EDITOR='vim'

# history
export HISTCONTROL='ignoredups:erasedups'
export HISTSIZE=100000
export HISTIGNORE='clear:exit:vim:ls:history'
export HISTFILESIZE=100000
export HISTTIMEFORMAT="%d/%m/%y %T "
shopt -s histappend # append to history
# save and reload the history after each command finishes
export PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"

alias dl="youtube-dl -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/mp4' -o '~/youtube/%(title)s-%(id)s.%(ext)s'"
alias grep="grep --color"
alias pg="ps aux | grep"
alias ct="ctags -R ."
alias gdel="git branch --merged | egrep -v '(^\*|master)' | xargs git branch -d"
alias gg="git grep"
alias agu='ag -u'
alias agc='ag --hidden --path-to-ignore ~/.ignore -C 5'
alias agg='ag --u -g'
alias calm='cal -3'
alias caly='cal -y'
alias public_ip="curl ipinfo.io/ip"

export PATH="/usr/local/bin:/usr/local/sbin:$PATH"

# fzf
if type "fzf" > /dev/null 2>&1; then
  source "/usr/local/opt/fzf/shell/key-bindings.bash"
  export FZF_DEFAULT_OPTS='--height 50% --reverse'
  # use ag instead of find
  # used in fzf and vim
  export FZF_DEFAULT_COMMAND='ag -l --no-color -g "" --hidden --path-to-ignore ~/.ignore'
  # used in fzf in <c-t>
  export FZF_CTRL_T_COMMAND='ag -l --no-color -g "" --hidden'
else
  # enable forward (C-s) - http://askubuntu.com/questions/60071/how-to-forward-search-history-with-the-reverse-i-search-command-ctrlr
  stty stop undef
fi

# rails
alias rr="bin/rails restart"
alias rc="bin/rails console"
alias rl="tail -f -n 1000 log/development.log"
alias be="bundle exec"
# alias fs="foreman start"

# bundler
export BUNDLER_EDITOR=vim

# git-aware-prompt
# https://github.com/jimeh/git-aware-prompt
export GITAWAREPROMPT=~/.bash/git-aware-prompt
source $GITAWAREPROMPT/main.sh

# terminal colour
export PS1="\[$bldylw\]\\w \[$txtgrn\]\$git_branch\[$txtred\]\$git_dirty\[$txtrst\]\$ "

# tmuxinator
source ~/dotfiles/tmuxinator/tmuxinator.bash
export TMUXINATOR_CONFIG=~/dotfiles/tmuxinator/config

# rbenv
eval "$(rbenv init -)"
