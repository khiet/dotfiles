# https://github.com/tmuxinator/tmuxinator/tree/v0.15.0#create-a-project

name: neconote
root: ~/neconote

on_project_start: if ! lsof -i :1025 > /dev/null; then mailcatcher; fi;
on_project_stop: pkill -9 -f puma

startup_window: editor

windows:
  - editor:
      layout: main-vertical
      panes:
        - vim
  - server:
      layout: main-vertical
      panes:
        - bin/rails s -p <%= ARGV[2] || 3000 %>
        - ngrok http -subdomain=neconote.eu.ngrok.io <%= ARGV[2] || 3000 %>
        - bundle exec guard -G Guardfile.livereload
        - bundle exec sidekiq -c 1 -q mailers, -q default
